<% layout("/layouts/boilerplate") %>

<!-- ⭐ CATEGORY BAR -->
<div class="category-bar-wrapper">
  <div class="category-bar">

    <div class="category-item">
      <i class="fa-solid fa-fire"></i>
      <span>Trending</span>
    </div>

    <div class="category-item">
      <i class="fa-solid fa-bed"></i>
      <span>Rooms</span>
    </div>

    <div class="category-item">
      <i class="fa-solid fa-city"></i>
      <span>Iconic Cities</span>
    </div>

    <div class="category-item">
      <i class="fa-solid fa-mountain"></i>
      <span>Mountains</span>
    </div>

    <div class="category-item">
      <i class="fa-solid fa-chess-rook"></i>
      <span>Castles</span>
    </div>

    <div class="category-item">
      <i class="fa-solid fa-person-swimming"></i>
      <span>Amazing Pools</span>
    </div>

    <div class="category-item">
      <i class="fa-solid fa-campground"></i>
      <span>Camping</span>
    </div>

    <div class="category-item">
      <i class="fa-solid fa-tractor"></i>
      <span>Farms</span>
    </div>

    <div class="category-item">
      <i class="fa-regular fa-snowflake"></i>
      <span>Arctic</span>
    </div>

<!-- ⭐ GST TOGGLE BUTTON (RIGHT SIDE) -->
<div class="d-flex justify-content-end mb-3">
  <div class="form-check form-switch">
    <input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault">
    <label class="form-check-label" for="flexSwitchCheckDefault">
      Display total after taxes
    </label>
  </div>
</div>

  </div>
</div>



<!-- ⭐ LISTINGS -->
<div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 g-3">
  <% allListings.forEach(listing => { %>

    <a href="/listings/<%= listing._id %>" class="listing-link text-decoration-none text-dark">
      <div class="card h-100 shadow-sm">

        <!-- Image -->
        <img 
          src="<%= listing.image?.url || 'https://via.placeholder.com/400x250?text=No+Image' %>" 
          class="card-img-top"
          alt="Listing Image"
        />

        <!-- Card Body -->
        <div class="card-body">
          <p class="card-text mb-2">
            <b><%= listing.title %></b><br/>

            <!-- PRICE -->
            ₹ <%= listing.price.toLocaleString("en-IN") %> / night

            <!-- GST LINE (HIDDEN INITIALLY) -->
            <br>
            <i class="tax-info" style="display:none;">
              &nbsp;&nbsp; +18% GST
            </i>
          </p>

          <p class="text-muted mb-0">
            <%= listing.location %>, <%= listing.country %>
          </p>
        </div>

      </div>
    </a>

  <% }) %>
</div>


<!-- ⭐ GST TOGGLE SCRIPT (EXACT STYLE YOU ASKED) -->
<script>
  let taxSwitch = document.getElementById("flexSwitchCheckDefault");
  taxSwitch.addEventListener("click", () => {
      let taxInfo = document.getElementsByClassName("tax-info");
      for (info of taxInfo) {
          if (info.style.display != "inline") {
              info.style.display = "inline";
          } else {
              info.style.display = "none";
          }
      }
  });
</script>